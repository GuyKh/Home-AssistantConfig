resources:
  - type: module
    url: /local/mini-graph-card-bundle.js?v=0.2.4
  - type: module
    url: >-
      https://cdn.jsdelivr.net/gh/bramkragten/custom-ui@master/weather-card/weather-card.min.js
  - type: module
    url: /local/mini-media-player-bundle.js?v=1.0.1
  
  ## https://github.com/thomasloven/lovelace-card-modder ##
  - url: /local/custom_ui/card-modder.js
    type: module
  
  ## https://github.com/thomasloven/lovelace-card-tools ##
  - url: /local/custom_ui/card-tools.js?v=deb8e3
    type: js
  
  ## For Xiaomi-Vacuum 
  - url: /local/entity-attributes-card.js?v=0.1.1
    type: js
views:
  - path: default_view
    cards:
      - type: entities
        entities:
          - device_tracker.samsung_s8
          - device_tracker.samsung_s8_bt
          - device_tracker.samsung_gear_s2
          - device_tracker.samsung_gear_s2_bt
          - sensor.guy_presence
          - sensor.meital_presence
        show_header_toggle: false
        title: People
      - type: entities
        entities:
          - switch.sonoff_10004bd3c1
        show_header_toggle: false
        title: Entryway
      - type: entities
        entities:
          - light.xiaomi_philips_smart_led_ball
        show_header_toggle: false
        title: Living Room
      - type: 'custom:weather-card'
        entity: weather.dark_sky
      - type: entities
        entities:
          - entity: vacuum.xiaomi_vacuum_cleaner
          - entity: sensor.xiaomi_vacuum_cleaner_status
        show_header_toggle: false
        title: Robot Vacuum
      - type: entities
        entities:
          - input_select.vacuum_room
          - binary_sensor.vacuum_room
        show_header_toggle: false
        title: Vacuum a Room
      - type: light
        entity: light.xiaomi_philips_smart_led_ball
        name: Xiaomi Philips Smart Led
        theme: Backend-selected
      - type: entities
        entities:
          - entity: person.guy
          - entity: person.meital
        show_header_toggle: false
        title: Persons
    badges: []
    title: Home
  - path: system
    cards:
      - type: entities
        entities:
          - entity: sensor.date
          - entity: sensor.time
          - entity: sensor.last_boot
          - entity: sensor.ha_installed_version
          - entity: updater.updater
          - entity: sensor.memory_free
          - entity: sensor.memory_use_percent
          - entity: sensor.swap_free
          - entity: sensor.swap_use_percent
          - entity: sensor.cpu_temperature
          - entity: sensor.processor_use
          - entity: sensor.load_5m
          - entity: sensor.disk_free_home
          - entity: sensor.network_in_enxb827ebcca772
          - entity: sensor.network_out_enxb827ebcca772
          - entity: sensor.network_in_wlan0
          - entity: sensor.network_out_wlan0
          - entity: sensor.disk_use_percent_home
          - entity: sensor.home_assistant_v2_db
        show_header_toggle: false
        title: System Status
      - type: 'custom:mini-graph-card'
        entities:
          - sensor.memory_use_percent
          - sensor.disk_use_percent_home
          - sensor.cpu_temperature
        name: 'CPU Temp, Disk and Memory Use'
      - type: 'custom:mini-graph-card'
        entities:
          - sensor.processor_use
          - sensor.swap_use_percent
        name: Processor and Swap use
      - type: 'custom:mini-graph-card'
        entities:
          - sensor.load_5m
      - type: 'custom:mini-graph-card'
        entities:
          - sensor.home_assistant_v2_db
        name: DB Size
    badges: []
    title: System
  - path: cameras
    cards:
      - type: picture-entity
        entity: camera.foscam_mjpeg
      - type: picture-entity
        entity: camera.foscam_native
      - type: picture-entity
        entity: camera.android_webcam_mjpeg
      - type: entities
        entities:
          - input_boolean.foscam_preset_1
          - input_boolean.foscam_preset_2
          - input_boolean.foscam_preset_3
          - input_boolean.foscam_preset_4
        show_header_toggle: false
        title: Input boolean
    badges: []
    title: cameras
  - path: all_devices
    cards: []
    badges:
      - device_tracker.qcombtd
      - device_tracker.04d6aaa0ae97
      - device_tracker.34ce00c6f5fc
      - device_tracker.7811dc6a8dd9
      - device_tracker.b827ebcca772
      - device_tracker.galaxy_s8
      - device_tracker.meital_s9
      - device_tracker.f4f5dbd0d909
      - device_tracker.redmi_2
      - device_tracker.30fd380497d1
      - device_tracker.redmi
      - device_tracker.hk_nova
      - device_tracker.acd1b8e5bf3f
      - device_tracker.ipad_gabrielle
      - device_tracker.64a2f95150ee
      - device_tracker.fcc2deac7977
      - device_tracker.9c5cf9588783
      - device_tracker.victurio
      - device_tracker.840d8e489a2a
      - device_tracker.000000020201
      - device_tracker.guy_mac
      - device_tracker.04b167103f40
      - device_tracker.guyplus_one
      - device_tracker.2400bacdd0dd
      - device_tracker.3cbd3e1a3f9d
      - device_tracker.f04f7cff99c9
      - device_tracker.685acfad03a2
      - device_tracker.b827eb99f227
      - device_tracker.24181d2414cd
      - device_tracker.7811dc9eb23c
      - device_tracker.samsung_gear_s2
      - device_tracker.yonis_phone
      - device_tracker.2c598a587acb
      - device_tracker.samsung_s8_bt
      - device_tracker.samsung_gear_s2_bt
      - device_tracker.7802f8ffcdfe
      - device_tracker.c485082bc3ca
      - device_tracker.e8abfa00230c
      - device_tracker.samsung_s8
      - device_tracker.c0eefb24470b
      - device_tracker.24181d041d91
      - device_tracker.meital_galaxy_s9
      - device_tracker.84a466ff2bde
    title: all devices
  - path: deluge
    cards:
      - type: entities
        entities:
          - entity: sensor.localdeluge_down_speed
          - entity: sensor.localdeluge_up_speed
          - entity: sensor.localdeluge_status
          - entity: switch.localdeluge
          - entity: sensor.remotedeluge_down_speed
          - entity: sensor.remotedeluge_up_speed
          - entity: sensor.remotedeluge_status
          - entity: switch.remotedeluge
        show_header_toggle: false
        title: Deluge Sensors
    badges: []
    title: Deluge
  - path: media
    title: Media
    cards:
      - type: 'custom:mini-media-player'
        entity: media_player.living_room_tv
      - type: 'custom:mini-media-player'
        entity: media_player.kodi
      - type: 'custom:mini-media-player'
        entity: media_player.googlehome3672
      - type: 'custom:mini-media-player'
        entity: media_player.samsung_tv_remote
      - type: 'custom:mini-media-player'
        entity: media_player.entryway_speaker
      - type: 'custom:mini-media-player'
        entity: media_player.home_group
      - type: 'custom:mini-media-player'
        entity: media_player.spotify
    badges: []
  - path: pi_hole
    title: PiHole
    cards:
      - type: entities
        entities:
          - entity: sensor.pi_hole_ads_percentage_blocked_today
          - entity: sensor.pi_hole_ads_blocked_today
          - entity: sensor.pi_hole_domains_blocked
          - entity: sensor.pi_hole_dns_queries_today
          - entity: sensor.pi_hole_dns_unique_clients
        show_header_toggle: false
        title: PiHole Entities
    badges: []
    icon: ''
  - path: router
    cards:
      - type: entities
        entities:
          - entity: sensor.archer_vr600_bytes_sent
          - entity: sensor.archer_vr600_bytes_received
          - entity: sensor.archer_vr600_packets_sent
          - entity: sensor.archer_vr600_packets_received
        show_header_toggle: false
        title: TP Link Absolute
      - type: entities
        entities:
          - entity: sensor.archer_vr600_kbyte_sec_sent
          - entity: sensor.archer_vr600_kbyte_sec_received
          - entity: sensor.archer_vr600_packets_sec_sent
          - entity: sensor.archer_vr600_packets_sec_received
        show_header_toggle: false
        title: TP Link Per Second
      - type: 'custom:mini-graph-card'
        entities:
          - entity: sensor.archer_vr600_kbyte_sec_sent
          - entity: sensor.archer_vr600_kbyte_sec_received
          - entity: sensor.archer_vr600_packets_sec_sent
          - entity: sensor.archer_vr600_packets_sec_received
        name: History
    badges: []
    title: Router

  - path: xiaomi_vacuum  
    icon: mdi:robot-vacuum-variant
    background: center / cover no-repeat url("/local/lovelace/background/back02.jpg") fixed
    name: Xiaomi Vacuum
    type: horizontal
    cards:   
      - type: custom:card-modder
        card:
          type: picture-elements
          image: /local/lovelace/home/xiaomi_vacuum_04.jpg
          elements:
          - type: image
            entity: input_boolean.vacuum_zone_settings
            tap_action: 
              action: toggle
            hold_action: 
              action: toggle
            image: /local/lovelace/vacuum/map.png
            state_image:
              'on': /local/lovelace/vacuum/map.png
            state_filter:
              'on': brightness(200%) saturate(1.8)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 90%
              left: 65%
              width: 4.5%
          - type: icon
            icon: mdi:information
            tap_action: 
              action: more-info
            entity: vacuum.xiaomi_vacuum
            style:
              top: 90%
              left: 75%
          - type: icon
            icon: mdi:bell-ring
            tap_action: 
              action: call-service
              service: vacuum.locate
            entity: vacuum.xiaomi_vacuum
            style:
              top: 90%
              left: 55%
              "--paper-item-icon-color": rgb(115, 122, 130)
          - type: icon
            tap_action: 
              action: call-service
              service: vacuum.return_to_base
            icon: mdi:home
            entity: vacuum.xiaomi_vacuum
            style:
              top: 90%
              left: 45%
              "--paper-item-icon-color": rgb(115, 122, 130)
          - type: icon
            icon: mdi:play
            tap_action: 
              action: call-service
              service: vacuum.start
            entity: vacuum.xiaomi_vacuum
            style:
              top: 90%
              left: 35%
              "--paper-item-icon-color": rgb(115, 122, 130)
          - type: icon
            icon: mdi:stop
            tap_action: 
              action: call-service
              service: vacuum.stop
            entity: vacuum.xiaomi_vacuum
            style:
              top: 90%
              left: 25%
              "--paper-item-icon-color": rgb(115, 122, 130)
          ## Main Brush ##
          - type: state-label
            entity: sensor.vacuum_main_brush
            style:
              top: 30%
              right: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              text-shadow: 1px 1px black
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: state-label
            entity: sensor.vacuum_side_brush
            style:
              top: 78%
              right: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: state-label
            entity: sensor.vacuum_filter
            style:
              top: 38%
              right: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: state-label
            entity: sensor.vacuum_sensor
            style:
              top: 60%
              right: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          ## Status ##
          - type: state-label
            entity: sensor.vacuum_status
            style:
              top: 53%
              right: 79%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              text-shadow: 1px 1px black
              font-size: 90%
              font-weight: bold
              opacity: 0.8

          - type: state-label
            entity: vacuum.xiaomi_vacuum
            style:
              top: 10%
              right: 41%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              text-shadow: 1px 1px black
              font-size: 148%
              font-weight: bold
              opacity: 0.8              
              
          - type: state-label
            entity: sensor.vacuum_battery
            style:
              top: 34%
              left: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: state-label
            entity: sensor.vacuum_cleaning_time
            style:
              top: 87%
              left: 0%
              color: '#ffffff'
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 80%
              font-weight: bold
          - type: state-label
            entity: sensor.vacuum_cleaned_area
            style:
              top: 81%
              left: 0%
              color: '#ffffff'
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 80%
              font-weight: bold              
          - type: state-label
            entity: sensor.vacuum_weekdays
            style:
              top: 75%
              left: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: state-label
            entity: sensor.vacuum_weekend
            style:
              top: 60%
              left: 1%
              color: rgb(255, 255, 255)
              transform: translate(0%,-50%)
              pointer-events: none
              font-size: 90%
              font-weight: bold
              opacity: 0.8
          - type: image
            entity: automation.vacuum_schedule_cleaning_on_weekdays
            tap_action: 
              action: toggle
            image: /local/lovelace/vacuum/timer-off.png
            state_image:
              'on': /local/lovelace/vacuum/timer.png
            state_filter:
              'on': brightness(200%) saturate(1.8)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 90%
              left: 84%
              width: 4.5%
          - type: image
            entity: automation.vacuum_schedule_cleaning_on_weekends
            tap_action: 
              action: toggle
            image: /local/lovelace/vacuum/timer-off.png
            state_image:
              'on': /local/lovelace/vacuum/timer.png
            state_filter:
              'on': brightness(200%) saturate(1.8)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 90%
              left: 92%
              width: 4.5%
        style:                 
          border-radius: 20px
          border: solid 1px rgba(100,100,100,0.3)
          box-shadow: 3px 3px rgba(0,0,0,0.4)    
          overflow: hidden
          
#################################################################
#                                                               #
#                Vacuum - Start Time Hour Minutes Card          #
#                                                               #
#################################################################
      - type: vertical-stack
        cards:        
          - type: custom:card-modder
            card:
              type: conditional
              conditions:
                - entity: automation.vacuum_schedule_cleaning_on_weekdays
                  state: "on"
              card:
                type: entities
                entities:
                  - sensor.vacuum_start_time_weekdays
                  - input_number.vacuum_start_hour_weekdays
                  - input_number.vacuum_start_minutes_weekdays
            style:                 
              background-image: url("/local/lovelace/background/cardback.png")
              background-repeat: no-repeat
              background-color: rgba(50,50,50,0.3)
              background-size: 100% 200px
              border-radius: 20px
              border: solid 1px rgba(100,100,100,0.3)
              box-shadow: 3px 3px rgba(0,0,0,0.4)


#################################################################
#                                                               #
#           Vacuum - Turns on Zone Settings Value Card         #
#                                                               #
#################################################################
          - type: custom:card-modder
            card:
              type: conditional
              conditions:
                - entity: input_boolean.vacuum_zone_settings
                  state: "on"
              card:
                type: vertical-stack
                cards:
                  - type: entities
                    entities:
                      - input_select.vacuum_fan_speed_list
                      - input_number.vacuum_passes
                      - input_select.vacuum_zone 
            style:                 
              background-image: url("/local/lovelace/background/cardback.png")
              background-repeat: no-repeat
              background-color: rgba(50,50,50,0.3)
              background-size: 100% 130px
              border-radius: 20px
              border: solid 1px rgba(100,100,100,0.3)
              box-shadow: 3px 3px rgba(0,0,0,0.4)


#################################################################
#                                                               #
#                   Vacuum - Zone Fan Card                      #
#                                                               #
#################################################################
      - type: vertical-stack
        cards:             
          - type: custom:card-modder
            card:
              type: glance
              entities:
                - entity: input_boolean.vacuum_zone_settings
                  name: Zone Settings
                - entity: input_select.vacuum_fan_speed_list
                  name: Fan speed
            style:                 
              background-image: url("/local/lovelace/background/cardback.png")
              background-repeat: no-repeat
              background-color: rgba(50,50,50,0.3)
              background-size: 100% 130px
              border-radius: 20px
              border: solid 1px rgba(100,100,100,0.3)
              box-shadow: 3px 3px rgba(0,0,0,0.4)



#################################################################
#                                                               #
#                   Vacuum - INFO Value Card                    #
#                                                               #
#################################################################

          - type: custom:card-modder
            card:
              type: custom:entity-attributes-card
              entity: vacuum.xiaomi_vacuum
              heading_name: Status
              heading_state: Value
              filter:
                include:
                  - key: vacuum.xiaomi_vacuum.cleaning_time
                    name: Cleaning time (last)
                    unit: minutes
                  - key: vacuum.xiaomi_vacuum.cleaned_area
                    name: Clean surface (last)
                    unit: meters
                  - key: vacuum.xiaomi_vacuum.cleaning_count
                    name: Cleaning cycles (total)
                  - key: vacuum.xiaomi_vacuum.total_cleaning_time
                    name: Cleaning time (total)
                    unit: minutes
                  - key: vacuum.xiaomi_vacuum.total_cleaned_area
                    name: Clean surface (total)
                    unit: Area 
            style:                 
              background-image: url("/local/lovelace/background/cardback.png")
              background-repeat: no-repeat
              background-color: rgba(50,50,50,0.3)
              background-size: 100% 130px
              border-radius: 20px
              border: solid 1px rgba(100,100,100,0.3)
              box-shadow: 3px 3px rgba(0,0,0,0.4)


#################################################################
#                                                               #
#                   Vacuum - Status Value Card                  #
#                                                               #
#################################################################

          - type: custom:card-modder
            card:
              type: custom:entity-attributes-card
              entity: vacuum.xiaomi_vacuum
              heading_name: Status
              heading_state: Value
              filter:
                include:
                  - key: vacuum.xiaomi_vacuum.do_not_disturb
                    name: Do not disturb
                  - key: vacuum.xiaomi_vacuum.do_not_disturb_start
                    name: Do not disturb start
                  - key: vacuum.xiaomi_vacuum.do_not_disturb_end
                    name: Do not disturb end
            style:                 
              background-image: url("/local/lovelace/background/cardback.png")
              background-repeat: no-repeat
              background-color: rgba(50,50,50,0.3)
              background-size: 100% 130px
              border-radius: 20px
              border: solid 1px rgba(100,100,100,0.3)
              box-shadow: 3px 3px rgba(0,0,0,0.4)
title: Home
